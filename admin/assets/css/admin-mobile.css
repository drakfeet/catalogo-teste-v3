/* ========================================
   üì± RESPONSIVE DESIGN V4 - MOBILE FIRST
   Design Moderno e Otimizado
======================================== */

/* ========================================
   TABLET - 769px at√© 1024px
======================================== */
@media (min-width: 769px) and (max-width: 1024px) {
  .sidebar {
    width: 240px;
  }

  .main-content {
    margin-left: 240px;
  }

  .sidebar-header h2 {
    font-size: 20px;
  }

  .nav-item {
    padding: 12px var(--space-md);
    font-size: 14px;
  }

  .container {
    padding: var(--space-xl);
  }

  .dashboard-grid {
    grid-template-columns: repeat(2, 1fr);
    gap: var(--space-md);
  }

  .charts-grid {
    grid-template-columns: 1fr;
  }

  .form-row {
    grid-template-columns: 1fr;
  }

  .topbar {
    padding: var(--space-md) var(--space-lg);
  }

  .topbar h1 {
    font-size: 22px;
  }
}

/* ========================================
   MOBILE - at√© 768px
======================================== */
@media (max-width: 768px) {
  
  /* ----------------
     VARI√ÅVEIS MOBILE
  ---------------- */
  :root {
    --space-xs: 3px;
    --space-sm: 6px;
    --space-md: 12px;
    --space-lg: 18px;
    --space-xl: 24px;
    --space-2xl: 32px;
  }

  /* ----------------
     LAYOUT BASE
  ---------------- */
  .admin-layout {
    flex-direction: column;
  }

  /* ----------------
     MENU HAMB√öRGUER MOBILE
  ---------------- */
  .btn-menu-toggle-admin {
    display: flex;
  }

  .btn-close-sidebar {
    display: flex;
  }

  /* ----------------
     SIDEBAR MOBILE - Drawer Lateral
  ---------------- */
  .sidebar {
    width: 85%;
    max-width: 320px;
    height: 100vh;
    position: fixed;
    top: 0;
    left: -100%;
    transform: translateX(0);
    transition: left var(--transition-slow);
    z-index: var(--z-modal);
    border-right: 1px solid var(--border-strong);
    box-shadow: 4px 0 30px rgba(0, 0, 0, 0.5);
  }

  .sidebar.mobile-open {
    left: 0;
  }

  /* Corrigir main-content quando sidebar est√° aberto */
  .main-content {
    margin-left: 0;
  }

  /* Efeito de barra superior colorida */
  .sidebar::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: var(--primary-gradient);
  }

  .sidebar-header {
    display: flex;
  }

  /* Navega√ß√£o Mobile - Mant√©m estilo desktop mas em drawer */
  .sidebar-nav {
    flex: 1;
    padding: var(--space-lg) 0;
    overflow-y: auto;
  }

  .nav-item {
    display: flex;
    align-items: center;
    gap: 14px;
    padding: 14px var(--space-lg);
    color: var(--text-secondary);
    text-decoration: none;
    font-size: 15px;
    font-weight: 500;
    transition: all var(--transition-base);
    position: relative;
    margin: 2px var(--space-sm);
    border-radius: var(--radius-md);
  }

  .nav-item::before {
    content: '';
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    width: 3px;
    height: 0;
    background: var(--primary);
    border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
    transition: height var(--transition-base);
  }

  .nav-item:hover {
    background: var(--bg-hover);
    color: var(--text-primary);
    transform: translateX(4px);
  }

  .nav-item:hover::before {
    height: 60%;
  }

  .nav-item.active {
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.15) 0%, rgba(139, 92, 246, 0.15) 100%);
    color: var(--primary-light);
    font-weight: 600;
  }

  .nav-item.active::before {
    height: 70%;
    box-shadow: 0 0 10px var(--primary-glow);
  }

  .nav-item .icon {
    font-size: 20px;
    min-width: 20px;
  }

  /* ----------------
     SUBMENU MOBILE - Drawer Lateral
  ---------------- */
  .nav-submenu {
    position: fixed;
    top: 0;
    right: -100%;
    width: 85%;
    max-width: 340px;
    height: 100vh;
    background: var(--bg-glass);
    backdrop-filter: blur(30px);
    border-left: 1px solid var(--border-strong);
    z-index: 2000;
    transition: right var(--transition-slow);
    overflow-y: auto;
    padding: var(--space-xl) 0;
    margin: 0;
    box-shadow: -8px 0 30px rgba(0, 0, 0, 0.5);
  }

  .nav-submenu.active {
    right: 0;
  }

  .nav-submenu-title {
    padding: var(--space-lg) var(--space-xl);
    margin-bottom: var(--space-md);
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.15) 0%, transparent 100%);
    border: none;
    border-bottom: 2px solid var(--primary);
    display: flex;
    align-items: center;
    justify-content: space-between;
    font-size: 13px;
    position: relative;
  }

  .nav-submenu-title::after {
    content: '‚úï';
    font-size: 24px;
    cursor: pointer;
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--bg-elevated);
    border-radius: var(--radius-md);
    transition: all var(--transition-base);
  }

  .nav-submenu-title::after:hover {
    background: var(--danger);
    color: white;
    transform: rotate(90deg);
  }

  .nav-item-sub {
    padding: 16px var(--space-xl);
    border-left: none;
    border-bottom: 1px solid var(--border-light);
    font-size: 15px;
    gap: var(--space-md);
  }

  .nav-item-sub::before {
    left: var(--space-xl);
  }

  .nav-item-sub:hover {
    padding-left: var(--space-xl);
  }

  /* Overlay do Submenu */
  .submenu-overlay {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(10, 14, 26, 0.8);
    backdrop-filter: blur(4px);
    z-index: 1999;
  }

  .submenu-overlay.active {
    display: block;
    animation: fadeIn var(--transition-base);
  }

  /* ----------------
     BOT√ÉO LOGOUT MOBILE
  ---------------- */
  .sidebar-footer {
    padding: var(--space-lg);
    border-top: 1px solid var(--border-color);
    background: linear-gradient(0deg, rgba(239, 68, 68, 0.05) 0%, transparent 100%);
  }

  .btn-logout {
    width: 100%;
    padding: 14px var(--space-md);
    font-size: 14px;
    border-radius: var(--radius-md);
  }

  .btn-logout::before {
    display: none;
  }

  /* ----------------
     MAIN CONTENT
  ---------------- */
  .main-content {
    margin-left: 0;
    padding-bottom: var(--space-lg);
  }

  /* ----------------
     TOPBAR
  ---------------- */
  .topbar {
    padding: var(--space-md);
    flex-wrap: wrap;
    gap: var(--space-md);
    position: relative;
    top: 0;
  }

  .topbar::before {
    height: 3px;
  }

  .topbar h1 {
    font-size: 20px;
    flex: 1;
    letter-spacing: -0.3px;
  }

  .topbar-actions {
    width: 100%;
    flex-wrap: wrap;
    gap: var(--space-sm);
    justify-content: flex-end;
  }

  .btn-theme-toggle-admin {
    width: 36px;
    height: 36px;
    font-size: 16px;
  }

  .select-periodo {
    flex: 1;
    min-width: 140px;
    padding: 12px var(--space-md);
    font-size: 15px;
  }

  /* ----------------
     CONTAINER
  ---------------- */
  .container {
    padding: var(--space-md);
  }

  /* ----------------
     DASHBOARD
  ---------------- */
  .dashboard-grid {
    grid-template-columns: 1fr;
    gap: var(--space-md);
  }

  .dashboard-card {
    padding: var(--space-lg);
    flex-direction: row;
    gap: var(--space-md);
  }

  .card-icon {
    min-width: 56px;
    width: 56px;
    height: 56px;
    font-size: 28px;
  }

  .card-content h3 {
    font-size: 12px;
  }

  .card-value {
    font-size: 28px;
  }

  .card-status {
    font-size: 11px;
  }

  /* ----------------
     CHARTS
  ---------------- */
  .charts-grid {
    grid-template-columns: 1fr;
    gap: var(--space-lg);
  }

  .chart-card {
    padding: var(--space-lg);
  }

  .chart-container {
    height: 260px;
  }

  .chart-header h3 {
    font-size: 15px;
  }

  /* Top Produtos */
  .top-produtos {
    gap: var(--space-sm);
  }

  .top-produto-item {
    padding: var(--space-md);
    flex-wrap: wrap;
  }

  .top-numero {
    font-size: 18px;
    min-width: 28px;
  }

  .top-nome {
    font-size: 14px;
  }

  .top-valor {
    font-size: 13px;
  }

  /* ----------------
     A√á√ïES R√ÅPIDAS
  ---------------- */
  .quick-actions h2 {
    font-size: 20px;
  }

  .actions-grid {
    grid-template-columns: repeat(2, 1fr);
    gap: var(--space-sm);
  }

  .action-button {
    padding: var(--space-lg);
    font-size: 13px;
  }

  .action-button .icon {
    font-size: 28px;
  }

  /* ----------------
     FORMUL√ÅRIOS
  ---------------- */
  .form-card {
    padding: var(--space-lg);
  }

  .form-row {
    grid-template-columns: 1fr;
  }

  .form-group label {
    font-size: 13px;
  }

  .form-group input,
  .form-group textarea,
  .form-group select {
    font-size: 16px; /* Evita zoom no iOS */
    padding: 12px 14px;
  }

  .form-group textarea {
    min-height: 100px;
  }

  .form-actions {
    flex-direction: column;
    gap: var(--space-sm);
  }

  .form-actions .btn {
    width: 100%;
    justify-content: center;
  }

  /* ----------------
     BOT√ïES
  ---------------- */
  .btn {
    padding: 12px 20px;
    font-size: 14px;
  }

  /* ----------------
     CONFIG SECTIONS
  ---------------- */
  .config-section {
    margin-bottom: var(--space-xl);
    padding-bottom: var(--space-xl);
  }

  .config-section h2 {
    font-size: 18px;
    padding-left: var(--space-sm);
  }

  .config-section h2::before {
    width: 3px;
    height: 24px;
  }

  .section-header {
    flex-direction: column;
    align-items: stretch;
    gap: var(--space-md);
  }

  .section-header .btn {
    width: 100%;
  }

  /* ----------------
     COLOR PICKER
  ---------------- */
  .color-picker-group {
    flex-direction: column;
    align-items: stretch;
    gap: var(--space-sm);
  }

  .color-picker-group input[type="color"] {
    width: 100%;
    height: 60px;
  }

  .color-picker-group input[type="text"] {
    max-width: 100%;
  }

  /* ----------------
     HOR√ÅRIOS
  ---------------- */
  .horarios-grid {
    padding: var(--space-md);
    gap: var(--space-md);
  }

  .horario-item {
    flex-direction: column;
    align-items: stretch;
    gap: var(--space-sm);
    padding: var(--space-md);
  }

  .horario-item label {
    min-width: auto;
    font-size: 14px;
  }

  .horario-inputs {
    flex-wrap: wrap;
  }

  .horario-inputs input[type="time"] {
    max-width: 100%;
    flex: 1;
    min-width: 120px;
  }

  /* ----------------
     STATUS GRID
  ---------------- */
  .status-grid {
    grid-template-columns: 1fr;
    gap: var(--space-md);
  }

  .status-item {
    padding: var(--space-lg);
  }

  /* ----------------
     SIMULADOR
  ---------------- */
  .simulador-parcelas {
    padding: var(--space-lg);
  }

  .simulacao-item {
    flex-direction: column;
    align-items: flex-start;
    gap: var(--space-sm);
    padding: var(--space-md);
  }

  .valor-destaque {
    font-size: 18px;
  }

  /* ----------------
     PREVIEW
  ---------------- */
  .preview-box {
    padding: var(--space-lg);
    min-height: 200px;
  }

  .preview-header {
    flex-direction: column;
    align-items: flex-start;
    gap: var(--space-sm);
  }

  /* ----------------
     VARI√ÅVEIS
  ---------------- */
  .variaveis-list {
    flex-direction: column;
  }

  .variavel-tag {
    width: 100%;
    text-align: center;
    padding: 8px 12px;
  }

  /* ----------------
     WHATSAPP PREVIEW
  ---------------- */
  .whatsapp-preview {
    padding: var(--space-md);
  }

  .whatsapp-preview pre {
    font-size: 13px;
    padding: var(--space-sm);
  }

  /* ----------------
     TABELAS
  ---------------- */
  .table-container {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    border-radius: var(--radius-md);
  }

  .data-table {
    min-width: 700px;
    font-size: 13px;
  }

  .data-table th,
  .data-table td {
    padding: 12px 10px;
  }

  .data-table th {
    font-size: 10px;
    position: sticky;
    top: 0;
    background: var(--bg-elevated);
  }

  .acoes {
    gap: 6px;
    justify-content: center;
  }

  .btn-editar,
  .btn-deletar {
    padding: 8px 12px;
    font-size: 16px;
  }

  /* ----------------
     MODAL
  ---------------- */
  .modal-content {
    width: 95%;
    max-height: 90vh;
    border-radius: var(--radius-lg);
  }

  .modal-header {
    padding: var(--space-lg);
  }

  .modal-header h3 {
    font-size: 18px;
  }

  .modal-body {
    padding: var(--space-lg);
  }

  .modal-actions {
    flex-direction: column;
  }

  .modal-actions .btn {
    width: 100%;
  }

  /* ----------------
     TAMANHO BUILDER
  ---------------- */
  .tamanho-builder {
    padding: var(--space-md);
  }

  .tamanho-input-group {
    flex-direction: column;
  }

  .tamanho-input-group .btn {
    width: 100%;
  }

  .lista-opcoes {
    min-height: 80px;
    padding: var(--space-sm);
  }

  .tamanhos-grid {
    grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
    gap: 6px;
    padding: var(--space-sm);
  }

  .tamanho-item {
    padding: 10px 6px;
    font-size: 13px;
  }

  /* ----------------
     LOGIN
  ---------------- */
  .login-container {
    padding: var(--space-md);
  }

  .login-box {
    padding: var(--space-xl) var(--space-lg);
  }

  .login-header h1 {
    font-size: 28px;
  }

  .login-header p {
    font-size: 14px;
  }

  /* ----------------
     INFO BOX
  ---------------- */
  .info-box {
    padding: var(--space-md);
  }

  .info-box h4 {
    font-size: 13px;
  }

  .info-box li {
    font-size: 13px;
    padding: 6px 0;
  }

  /* ----------------
     IMAGE PREVIEW
  ---------------- */
  .image-preview img {
    max-width: 100%;
    max-height: 180px;
  }

  /* ----------------
     ALERTAS
  ---------------- */
  .alert {
    padding: var(--space-sm) var(--space-md);
    font-size: 13px;
  }
}

/* ========================================
   MOBILE PEQUENO - at√© 480px
======================================== */
@media (max-width: 480px) {
  
  /* Dashboard em coluna √∫nica */
  .dashboard-grid {
    grid-template-columns: 1fr;
  }

  /* Navega√ß√£o mais compacta */
  .sidebar-nav {
    justify-content: flex-start;
  }

  .nav-item {
    min-width: 65px;
    max-width: 85px;
    padding: 8px 6px;
  }

  .nav-item .icon {
    font-size: 20px;
  }

  .nav-item span:not(.icon) {
    font-size: 8px;
  }

  /* Formul√°rios */
  .form-card {
    padding: var(--space-md);
  }

  /* Config */
  .config-section h2 {
    font-size: 16px;
  }

  /* Buttons */
  .btn {
    padding: 10px 16px;
    font-size: 13px;
  }

  /* Topbar */
  .topbar {
    padding: 12px;
  }

  .topbar h1 {
    font-size: 18px;
  }

  /* Cards */
  .dashboard-card {
    padding: var(--space-md);
  }

  .card-icon {
    min-width: 48px;
    width: 48px;
    height: 48px;
    font-size: 24px;
  }

  .card-value {
    font-size: 24px;
  }

  /* Actions Grid */
  .actions-grid {
    grid-template-columns: 1fr;
  }

  .action-button {
    padding: var(--space-lg) var(--space-md);
  }

  /* Charts */
  .chart-container {
    height: 220px;
  }
}

/* ========================================
   LANDSCAPE MOBILE - 768px landscape
======================================== */
@media (max-width: 768px) and (orientation: landscape) {
  
  .main-content {
    margin-bottom: 65px;
  }

  .sidebar {
    height: 65px;
  }

  .nav-item {
    padding: 8px 6px;
  }

  .nav-item .icon {
    font-size: 20px;
  }

  .nav-item span:not(.icon) {
    font-size: 8px;
  }

  .topbar {
    position: relative;
  }

  .chart-container {
    height: 240px;
  }

  .dashboard-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

/* ========================================
   BOT√ÉO MENU CONFIGURA√á√ïES (MOBILE)
======================================== */
@media (max-width: 768px) {
  .btn-config-menu {
    position: fixed;
    top: 70px;
    right: var(--space-md);
    width: 52px;
    height: 52px;
    background: var(--primary-gradient);
    color: white;
    border: none;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 22px;
    box-shadow: var(--shadow-lg), var(--shadow-glow);
    cursor: pointer;
    z-index: var(--z-sticky);
    transition: all var(--transition-bounce);
  }

  .btn-config-menu:active {
    transform: scale(0.95);
  }

  .btn-config-menu.active {
    background: linear-gradient(135deg, var(--danger) 0%, var(--danger-light) 100%);
    transform: rotate(135deg);
  }
}

/* ========================================
   SAFE AREA (iPhone X+)
======================================== */
@supports (padding: max(0px)) {
  @media (max-width: 768px) {
    .sidebar {
      padding-bottom: env(safe-area-inset-bottom);
    }

    .main-content {
      margin-bottom: calc(70px + env(safe-area-inset-bottom));
    }

    .sidebar-footer {
      top: calc(var(--space-md) + env(safe-area-inset-top));
    }
  }
}

/* ========================================
   PWA - STANDALONE MODE
======================================== */
@media (display-mode: standalone) {
  .topbar {
    padding-top: calc(var(--space-md) + env(safe-area-inset-top));
  }
}

/* ========================================
   TOUCH IMPROVEMENTS
======================================== */
@media (hover: none) and (pointer: coarse) {
  /* Aumentar √°reas de toque */
  .btn,
  .nav-item,
  .btn-editar,
  .btn-deletar {
    min-height: 44px;
    min-width: 44px;
  }

  /* Remover hover states em touch */
  .dashboard-card:hover,
  .chart-card:hover,
  .btn:hover {
    transform: none;
  }

  /* Feedback visual em tap */
  .btn:active,
  .nav-item:active {
    transform: scale(0.98);
    opacity: 0.8;
  }
}

/* ========================================
   ACESSIBILIDADE - ALTO CONTRASTE
======================================== */
@media (prefers-contrast: high) and (max-width: 768px) {
  .nav-item.active {
    background: var(--primary);
    color: white;
  }

  .sidebar::before {
    height: 4px;
  }

  .btn,
  .form-group input,
  .form-group textarea,
  .form-group select {
    border-width: 2px;
  }
}

/* ========================================
   REDU√á√ÉO DE MOVIMENTO
======================================== */
@media (prefers-reduced-motion: reduce) {
  .nav-submenu {
    transition: none;
  }

  .modal-content {
    animation: none;
  }

  .submenu-overlay {
    animation: none;
  }

  .btn::before,
  .action-button::before {
    transition: none;
  }
}

/* ========================================
   DARK MODE - MOBILE
======================================== */
@media (prefers-color-scheme: dark) and (max-width: 768px) {
  .sidebar {
    background: rgba(10, 14, 26, 0.95);
    backdrop-filter: blur(40px);
  }

  .nav-submenu {
    background: rgba(10, 14, 26, 0.98);
    backdrop-filter: blur(40px);
  }
}

/* ========================================
   IMPRESS√ÉO MOBILE
======================================== */
@media print and (max-width: 768px) {
  .sidebar,
  .sidebar-footer,
  .btn-config-menu {
    display: none !important;
  }

  .main-content {
    margin: 0;
    padding: 0;
  }

  .topbar {
    position: static;
    border: none;
  }

  .dashboard-grid {
    grid-template-columns: 1fr;
    gap: 10px;
  }

  .table-container {
    overflow: visible;
  }

  .data-table {
    min-width: 100%;
    font-size: 9pt;
  }
}

/* ========================================
   FIM DO CSS MOBILE MODERNO V4
======================================== */
